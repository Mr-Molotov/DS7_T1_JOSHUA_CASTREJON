<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario Completo</title>
    <style>
        .error { color: red; }
        .campo { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; }
    </style>
</head>
<body>
    <h1>Formulario de Registro</h1>
    
    <?php if (isset($errores) && !empty($errores)): ?>
        <div class="error">
            <h3>Errores encontrados:</h3>
            <ul>
                <?php foreach ($errores as $error): ?>
                    <li><?php echo htmlspecialchars($error); ?></li>
                <?php endforeach; ?>
            </ul>
        </div>
    <?php endif; ?>

    <form action="procesar.php" method="POST" enctype="multipart/form-data">
        <!-- Nombre -->
        <div class="campo">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" 
                   value="<?php echo isset($datos_previos['nombre']) ? htmlspecialchars($datos_previos['nombre']) : ''; ?>" required>
        </div>

        <!-- Email -->
        <div class="campo">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" 
                   value="<?php echo isset($datos_previos['email']) ? htmlspecialchars($datos_previos['email']) : ''; ?>" required>
        </div>

        <!-- Fecha de Nacimiento (NUEVO CAMPO) -->
        <div class="campo">
            <label for="fecha_nacimiento">Fecha de Nacimiento:</label>
            <input type="date" id="fecha_nacimiento" name="fecha_nacimiento" 
                   value="<?php echo isset($datos_previos['fecha_nacimiento']) ? htmlspecialchars($datos_previos['fecha_nacimiento']) : ''; ?>" required>
        </div>

        <!-- Sitio Web -->
        <div class="campo">
            <label for="sitioWeb">Sitio Web:</label>
            <input type="url" id="sitioWeb" name="sitioWeb" 
                   value="<?php echo isset($datos_previos['sitioWeb']) ? htmlspecialchars($datos_previos['sitioWeb']) : ''; ?>">
        </div>

        <!-- Género -->
        <div class="campo">
            <label>Género:</label>
            <?php
            $generos = ['masculino' => 'Masculino', 'femenino' => 'Femenino', 'otro' => 'Otro'];
            foreach ($generos as $valor => $texto):
                $checked = (isset($datos_previos['genero']) && $datos_previos['genero'] === $valor) ? 'checked' : '';
            ?>
                <label>
                    <input type="radio" name="genero" value="<?php echo $valor; ?>" <?php echo $checked; ?>>
                    <?php echo $texto; ?>
                </label>
            <?php endforeach; ?>
        </div>

        <!-- Intereses -->
        <div class="campo">
            <label>Intereses:</label>
            <?php
            $intereses = ['deportes' => 'Deportes', 'musica' => 'Música', 'lectura' => 'Lectura', 'tecnologia' => 'Tecnología'];
            foreach ($intereses as $valor => $texto):
                $checked = (isset($datos_previos['intereses']) && in_array($valor, $datos_previos['intereses'])) ? 'checked' : '';
            ?>
                <label>
                    <input type="checkbox" name="intereses[]" value="<?php echo $valor; ?>" <?php echo $checked; ?>>
                    <?php echo $texto; ?>
                </label>
            <?php endforeach; ?>
        </div>

        <!-- Comentarios -->
        <div class="campo">
            <label for="comentarios">Comentarios:</label>
            <textarea id="comentarios" name="comentarios"><?php echo isset($datos_previos['comentarios']) ? htmlspecialchars($datos_previos['comentarios']) : ''; ?></textarea>
        </div>

        <!-- Foto de Perfil -->
        <div class="campo">
            <label for="foto_perfil">Foto de Perfil:</label>
            <input type="file" id="foto_perfil" name="foto_perfil" accept="image/*">
        </div>

        <button type="submit">Enviar</button>
    </form>

    <br>
    <a href="resumen.php">Ver resumen de registros</a>
</body>
</html>